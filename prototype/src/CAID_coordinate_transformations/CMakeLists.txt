FIND_PROGRAM(PYTHON_EXECUTABLE NAMES python3 python3.3 DOC "python")

FILE(GLOB TXT_FILES "${CMAKE_CURRENT_SOURCE_DIR}/*.txt")
FILE(COPY ${TXT_FILES} DESTINATION ${CMAKE_BINARY_DIR})

IF(PYTHON_EXECUTABLE)

   SET(PYTHON3_FOUND ON)
   SET(TRANSLATE_PYTHON_SCRIPT 
      "${CMAKE_CURRENT_SOURCE_DIR}/../python_scripts/nurbs_patch_txt_to_nml.py")
  
   FILE(GLOB_RECURSE CIRCLE_TXT_FILES FOLLOW_SYMLINKS "${CMAKE_CURRENT_SOURCE_DIR}/*_patch*.txt")
	      
   FOREACH(_TXT_CIRCLE_FILE ${CIRCLE_TXT_FILES})
 

      EXECUTE_PROCESS(
         COMMAND ${PYTHON_EXECUTABLE} ${TRANSLATE_PYTHON_SCRIPT} ${_TXT_CIRCLE_FILE}
      )
   ENDFOREACH()

   SET(TRANSLATE_PYTHON_SCRIPT_INFO 
      "${CMAKE_CURRENT_SOURCE_DIR}/../python_scripts/translate_multipatch_info.py")
     
   FILE(GLOB_RECURSE TRANSLATE_NML_FILE_INFO "${CMAKE_CURRENT_SOURCE_DIR}/*_info.txt")
   
   FOREACH(_TXT_CIRCLE_FILE_INFO ${TRANSLATE_NML_FILE_INFO})	
      EXECUTE_PROCESS(
	COMMAND ${PYTHON_EXECUTABLE}  ${TRANSLATE_PYTHON_SCRIPT_INFO} ${_TXT_CIRCLE_FILE_INFO}
	   )
   ENDFOREACH()
	  

   #SET(TRANSLATE_PYTHON_SCRIPT_CONNECTIVITY	
   #  "${CMAKE_CURRENT_SOURCE_DIR}/../../python_scripts/translate_connectivity_info.py")

   # FILE(GLOB_RECURSE IEN_TXT_FILES FOLLOW_SYMLINKS "${CMAKE_CURRENT_SOURCE_DIR}/IEN_*.txt")
   # FILE(GLOB_RECURSE LM_TXT_FILES FOLLOW_SYMLINKS "${CMAKE_CURRENT_SOURCE_DIR}/LM_*.txt")
   # FILE(GLOB_RECURSE ID_TXT_FILES FOLLOW_SYMLINKS "${CMAKE_CURRENT_SOURCE_DIR}/ID.txt")

   # MESSAGE(STATUS "${IEN_TXT_FILES}")

   # MESSAGE(STATUS "${CMAKE_CURRENT_SOURCE_DIR}")

   #EXECUTE_PROCESS(
   # 	COMMAND ${TRANSLATE_PYTHON_SCRIPT_CONNECTIVITY} square_4p_n10 ${ID_TXT_FILES}  ${IEN_TXT_FILES} ${LM_TXT_FILES}
   #     	 )

ELSE(PYTHON_EXECUTABLE)

   MESSAGE(STATUS "Multipatch test needs python3")
   SET(PYTHON3_FOUND OFF)

ENDIF(PYTHON_EXECUTABLE)




FILE(GLOB_RECURSE NML_FILES "${CMAKE_CURRENT_SOURCE_DIR}/*.nml")
FILE(COPY ${NML_FILES} DESTINATION ${CMAKE_BINARY_DIR})


