import os
import os.path
import socket
import distutils.util

#Add your directory here
sll_dirs = Split(""" 	memory
			precision
			assert
			constants
			utilities
			splines
        		collective
			remap
			timer
			mesh_types
			ode_solvers
			diagnostics
			distribution_function
""")


platform = distutils.util.get_platform()
hostname = socket.gethostname() 

print 'hostname : ' + hostname
print 'platform : ' + platform

if hostname[:7] != "hpc-f02":
	print 'Ce fichier SCons ne fonctionne que sur hpc-f02'

intel11 = Environment( 
                        ENV = os.environ,
                        CC = 'mpicc',
                        F90 = 'mpif90',
                        F90FLAGS = ['-cpp','-g'],
                        F90PATH = ['../'+dirs for dirs in sll_dirs ],
                        CPPDEFINES = ['GFORTRAN', 'DEBUG', 'MPIF90', 'NOHDF5'],
                        LINK = ['mpif90'],
                        LIBPATH = ['.'],
                       )

env = intel11.Clone()
for dir in sll_dirs:
   print dir
   #SConscript([dir+'/SConscript'],['env'])

SConscript(['diagnostics/SConscript'],['env'])
SConscript(['mesh_types/SConscript'],['env'])
