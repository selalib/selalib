IF(${FFT_LIB} STREQUAL "FFTPACK")

  SET(FFT_SRC sll_fft_mod_through_fftpack.F90)
  SET(DEPENDENCIES dfftpack)
  ADD_DEFINITIONS(-D_DEFAULTFFTLIB=FFTPACK_MOD)

ELSEIF(${FFT_LIB} STREQUAL "FFTW")

  IF(FFTW_FOUND AND FFTW_ENABLED)
     INCLUDE_DIRECTORIES(${FFTW_INCLUDE_DIRS})
     SET(FFT_SRC fftw3.F90 sll_fft_mod_through_fftw.F90)
     SET(DEPENDENCIES ${FFTW_LIBRARIES})
     ADD_DEFINITIONS(-D_DEFAULTFFTLIB=FFTW_MOD)
  ENDIF()

ELSE()

  SET(FFT_SRC sll_fft_selalib_implementation.F90)
  ADD_DEFINITIONS(-D_DEFAULTFFTLIB=SLLFFT_MOD)

ENDIF()

ADD_LIBRARY(sll_fft STATIC ${FFT_SRC} sll_fft_utils.F90)

TARGET_LINK_LIBRARIES(sll_fft sll_assertion sll_memory sll_utilities ${DEPENDENCIES})

ADD_EXECUTABLE(test_fft unit_test.F90)

TARGET_LINK_LIBRARIES(test_fft sll_fft)
