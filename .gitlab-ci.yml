ubuntu-mpich:
  stage: build
  script: 
    - "scripts/selalib-ci.sh"
  only:
    - develop
  tags:
    - ubuntu
    - mpich
    
fedora-openmpi:
  stage: build
  script: 
    - "scripts/fedora-openmpi-ci.sh"
  only:
    - develop
  tags:
    - fedora
    - openmpi

fedora-mpich:
  stage: build
  script: 
    - "scripts/fedora-mpich-ci.sh"
  only:
    - develop
  tags:
    - fedora
    - mpich

pages:
    stage: deploy
    image: ubuntu:18.10

    before_script:
      - env DEBIAN_FRONTEND=noninteractive apt-get -y update
      - env DEBIAN_FRONTEND=noninteractive apt-get -y install libopenmpi-dev openmpi-bin libhdf5-openmpi-dev
      - env DEBIAN_FRONTEND=noninteractive apt-get -y install cmake g++ gfortran libfftw3-dev liblapack-dev libopenblas-dev doxygen texlive-latex-extra

    script:
      - mkdir -p public build
      - cd build && cmake .. -DHDF5_PARALLEL_ENABLED=ON && make && make doc-user
      - cp -r doc/html/* ../public/

    artifacts:
        paths:
        - public
    only:
        - develop

    tags:
      - docker



#intel-impi:
#  stage: build
#  script:
#    - "scripts/intel16-build.sh"
#  only:
#    - develop
#  tags:
#    - intel
    
#ubuntu-openmpi:
#  tags:
#    - ubuntu
#    - openmpi
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop

#  
#
#

#    
#mavericks-openmpi:
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop
#  tags:
#    - osx
#    - openmpi
#    
#mavericks-mpich:
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop
#  tags:
#    - osx
#    - mpich  
  
