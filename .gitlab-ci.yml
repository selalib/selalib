ubuntu-mpich:
  stage: build
  allow_failure: true
  script: 
    - "scripts/selalib-ci.sh"
  only:
    - develop
  tags:
    - ubuntu
    - mpich
    
fedora-openmpi:
  stage: build
  allow_failure: true
  script: 
    - "scripts/fedora-openmpi-ci.sh"
  only:
    - develop
  tags:
    - fedora
    - openmpi

fedora-mpich:
  stage: build
  allow_failure: true
  script: 
    - "scripts/fedora-mpich-ci.sh"
  only:
    - develop
  tags:
    - fedora
    - mpich

pages:
    stage: deploy
    image: pnavaro/selalib

    script:
      - mkdir -p public build
      - cd build && cmake .. -DHDF5_PARALLEL_ENABLED=ON && make && make doc-dev
      - cp -r doc/html/* ../public/doc
      - cd  ../doc && make
      - cp -r ../build/html/* ../public

    artifacts:
        paths:
        - public
    only:
        - develop

    tags:
      - docker



#intel-impi:
#  stage: build
#  script:
#    - "scripts/intel16-build.sh"
#  only:
#    - develop
#  tags:
#    - intel
    
#ubuntu-openmpi:
#  tags:
#    - ubuntu
#    - openmpi
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop

#  
#
#

#    
#mavericks-openmpi:
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop
#  tags:
#    - osx
#    - openmpi
#    
#mavericks-mpich:
#  stage: build
#  script: 
#    - "scripts/selalib-ci.sh"
#  only:
#    - develop
#  tags:
#    - osx
#    - mpich  
  
