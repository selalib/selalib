IF(FFTW_FOUND AND FFTW_ENABLED)

  FILE( GLOB INPUT_FILES "*.nml"         )
  FILE( GLOB   POST_PROC "*.dat" "*.gnu" )

  SET( INSTALL_DIR "${INSTALL_DIR}/${TEST_NAME}" )
 
  SET( TEST_NAME   2d_va_cartesian            )
  SET( SIM_NAME    2d_vlasov_ampere_cartesian )
  SET( EXECUTABLE "test_${TEST_NAME}"         )
  
  ADD_EXECUTABLE( ${EXECUTABLE} simulation_${SIM_NAME}.F90
                                unit_test_${TEST_NAME}.F90 )
    
  TARGET_LINK_LIBRARIES( ${EXECUTABLE} sll_simulations_parallel )
  
  INSTALL( TARGETS ${EXECUTABLE} DESTINATION ${INSTALL_DIR} )
  INSTALL( FILES   ${INPUT_FILES} README ${POST_PROC} DESTINATION ${INSTALL_DIR} )
  
  IF(BUILD_TESTING)
    FILE( COPY ${INPUT_FILES} DESTINATION ${CMAKE_CURRENT_BINARY_DIR} )
    SET(  ARGS ${CMAKE_CURRENT_BINARY_DIR}/vasim2d_cartesian_input )
    ADD_MPI_TEST( ${TEST_NAME} ${EXECUTABLE} ${PROCS} ${ARGS} )
    SET_TESTS_PROPERTIES( ${TEST_NAME} PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )
  ENDIF(BUILD_TESTING)
  
ENDIF(FFTW_FOUND AND FFTW_ENABLED)
