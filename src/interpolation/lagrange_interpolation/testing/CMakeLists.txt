# lagrange
ADD_EXECUTABLE( test_lagrange test_lagrange.F90 )
TARGET_LINK_LIBRARIES( test_lagrange sll_lagrange_interpolation )
ADD_TEST( NAME lagrange COMMAND test_lagrange )
#SET_TESTS_PROPERTIES( lagrange PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )

# lagrange_interpolation
ADD_EXECUTABLE( test_lagrange_interpolation test_lagrange_interpolation.F90 )
TARGET_LINK_LIBRARIES( test_lagrange_interpolation
  sll_lagrange_interpolation  )
ADD_TEST( NAME lagrange_interpolation COMMAND test_lagrange_interpolation )
SET_TESTS_PROPERTIES( lagrange_interpolation PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )

# lagrange_fast (serial)
ADD_EXECUTABLE( test_lagrange_interpolation_1d_fast test_lagrange_interpolation_1d_fast.F90 )
TARGET_LINK_LIBRARIES( test_lagrange_interpolation_1d_fast sll_lagrange_interpolation )
ADD_TEST( NAME lagrange_interpolation_1d_fast COMMAND test_lagrange_interpolation_1d_fast )
SET_TESTS_PROPERTIES( lagrange_interpolation_1d_fast PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )

# lagrange fast (parallel)
IF( MPI_ENABLED )
   SET(CMAKE_Fortran_COMPILER ${MPI_Fortran_COMPILER})
   ADD_EXECUTABLE( test_lagrange_interpolation_1d_fast_parallel test_lagrange_interpolation_1d_fast_parallel.F90 )
   TARGET_LINK_LIBRARIES( test_lagrange_interpolation_1d_fast_parallel sll_lagrange_interpolation sll_decomposition sll_collective )
   ADD_MPI_TEST( lagrange_interpolation_1d_fast_parallel test_lagrange_interpolation_1d_fast_parallel "1" "" )
   SET_TESTS_PROPERTIES( lagrange_interpolation_1d_fast_parallel PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )
ENDIF( MPI_ENABLED )
