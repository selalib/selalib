ADD_SUBDIRECTORY(interfaces)
ADD_SUBDIRECTORY(memory)
ADD_SUBDIRECTORY(working_precision)
ADD_SUBDIRECTORY(assert)
ADD_SUBDIRECTORY(errors)
ADD_SUBDIRECTORY(constants)
ADD_SUBDIRECTORY(boundary_condition_descriptors)
ADD_SUBDIRECTORY(utilities)
ADD_SUBDIRECTORY(timer)
ADD_SUBDIRECTORY(splines)
ADD_SUBDIRECTORY(meshes)
ADD_SUBDIRECTORY(lagrange_interpolation)
ADD_SUBDIRECTORY(hermite_interpolation)
ADD_SUBDIRECTORY(integration)
ADD_SUBDIRECTORY(periodic_interpolation)
ADD_SUBDIRECTORY(reduction)
ADD_SUBDIRECTORY(deboor_splines)
#ADD_SUBDIRECTORY(pic_particle_types)
ADD_SUBDIRECTORY(random_deviate_generators)
#ADD_SUBDIRECTORY(pic_particle_initializers)
#ADD_SUBDIRECTORY(pic_accumulators)
#ADD_SUBDIRECTORY(pic_utilities)
#ADD_SUBDIRECTORY(field_accumulators)
ADD_SUBDIRECTORY(interpolators)
ADD_SUBDIRECTORY(coordinate_transformations)
ADD_SUBDIRECTORY(characteristics)
ADD_SUBDIRECTORY(advection)
ADD_SUBDIRECTORY(fcisl)
ADD_SUBDIRECTORY(gyroaverage)
ADD_SUBDIRECTORY(field_solvers)
ADD_SUBDIRECTORY(descriptors)
ADD_SUBDIRECTORY(io)

#Fortran version is checked in CMakeModules/FortranConfig.cmake
IF(F2008)
  ADD_SUBDIRECTORY( vector_space )
  ADD_SUBDIRECTORY( ode_integrators )
ENDIF(F2008)

# Container for all particle methods (mostly PIC)
ADD_SUBDIRECTORY( particle_methods )

IF(MPI_ENABLED)
   
   SET(CMAKE_Fortran_COMPILER ${MPI_Fortran_COMPILER})
   ADD_SUBDIRECTORY(parallelization)
   ADD_SUBDIRECTORY(pif)

ENDIF()

ADD_SUBDIRECTORY(data_structures)
ADD_SUBDIRECTORY(visu_pic)
ADD_SUBDIRECTORY(time_solvers)
ADD_SUBDIRECTORY(ode_solvers)
ADD_SUBDIRECTORY(mesh_calculus)

ADD_SUBDIRECTORY(add_ons)

ADD_SUBDIRECTORY(namelist_initialization)    


IF(BUILD_PACKAGE)
  ADD_SUBDIRECTORY(${CMAKE_SOURCE_DIR}/../package ${CMAKE_BINARY_DIR}/package)
  MESSAGE(STATUS "SeLaLib will be installed in directory ${CMAKE_INSTALL_PREFIX}")
ENDIF(BUILD_PACKAGE)

IF(BUILD_SIMULATIONS)
  GET_FILENAME_COMPONENT( INSTALL_DIR_SIMS "${CMAKE_SOURCE_DIR}/usr" ABSOLUTE )
  SET(CMAKE_INSTALL_PREFIX_SIMS ${INSTALL_DIR_SIMS} CACHE PATH 
    "simulations install dir")
  ADD_SUBDIRECTORY(simulations)
ENDIF(BUILD_SIMULATIONS)
